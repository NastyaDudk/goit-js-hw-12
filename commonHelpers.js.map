{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const formElem = document.querySelector('.form');\n  const galleryEl = document.querySelector('.gallery-el');\n  const loaderElem = document.querySelector('.loader');\n  const loadMoreButton = document.querySelector('.load-more-button');\n\n  hideLoader();\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n\n  HTMLFormElement.addEventListener('submit', eventt => {\n    eventt.preventDefault();\n\n    formElem.addEventListener('submit', onSubmit);\n    loadMoreButton.addEventListener('click', onLoadMore);\n\n    async function onSubmit(e) {\n      e.preventDefault();\n      showLoader();\n\n      const value = formElem.querySelector('.input').value;\n\n      try {\n        const data = await getPhotoBySearch(value);\n        renderImages(data.hits);\n      } catch (error) {\n        renderError(error);\n      } finally {\n        hideLoader();\n      }\n\n      formElem.reset();\n    }\n\n    async function getPhotoBySearch(searchValue, page = 1) {\n      const KEY = '42153847-0f7baac2d7b2e92d7ce6bbe8e';\n      const params = {\n        key: KEY,\n        q: searchValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      };\n\n      const response = await axios.get('https://pixabay.com/api/', { params });\n\n      if (response.data.total === 0) {\n        throw new Error('No images found');\n      }\n\n      return response.data;\n    }\n\n    function renderImages(array) {\n      const markup = array\n        .map(\n          ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n          }) => {\n            return `\n        <div class=\"gallery\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n            <ul class=\"info-cards-container\">\n              <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n              <li class=\"info-cards-elements\">views<span>${views}</span></li>\n              <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n              <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n          </a>\n        </div>\n      `;\n          }\n        )\n        .join('');\n\n      galleryEl.innerHTML += markup;\n      lightbox.refresh();\n    }\n\n    function renderError(error) {\n      galleryEl.innerHTML = '';\n      iziToast.show({\n        message: `‚ùå \"${error.message}\". Please try again!`,\n        color: 'red',\n        position: 'topRight',\n        maxWidth: '400px',\n      });\n    }\n\n    function showLoader() {\n      loaderElem.style.display = 'block';\n    }\n\n    function hideLoader() {\n      loaderElem.style.display = 'none';\n    }\n  });\n});\n"],"names":["formElem","galleryEl","loaderElem","loadMoreButton","lightbox","SimpleLightbox","eventt","onSubmit","e","showLoader","value","data","getPhotoBySearch","renderImages","error","renderError","hideLoader","searchValue","page","params","response","axios","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"owBAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAiB,SAAS,cAAc,mBAAmB,EAEjE,aAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAClB,CAAG,EAED,gBAAgB,iBAAiB,SAAUC,GAAU,CACnDA,EAAO,eAAc,EAErBN,EAAS,iBAAiB,SAAUO,CAAQ,EAC5CJ,EAAe,iBAAiB,QAAS,UAAU,EAEnD,eAAeI,EAASC,EAAG,CACzBA,EAAE,eAAc,EAChBC,IAEA,MAAMC,EAAQV,EAAS,cAAc,QAAQ,EAAE,MAE/C,GAAI,CACF,MAAMW,EAAO,MAAMC,EAAiBF,CAAK,EACzCG,EAAaF,EAAK,IAAI,CACvB,OAAQG,EAAP,CACAC,EAAYD,CAAK,CACzB,QAAgB,CACRE,GACD,CAEDhB,EAAS,MAAK,CACf,CAED,eAAeY,EAAiBK,EAAaC,EAAO,EAAG,CAErD,MAAMC,EAAS,CACb,IAFU,qCAGV,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACd,EAEYE,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAAE,OAAAF,CAAM,CAAE,EAEvE,GAAIC,EAAS,KAAK,QAAU,EAC1B,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,IACjB,CAED,SAASP,EAAaS,EAAO,CAC3B,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IACmB;AAAA;AAAA,qBAEEN;AAAA,wBACGC,WAAsBC,aAAgBA;AAAA;AAAA,2DAEHC;AAAA,2DACAC;AAAA,8DACGC;AAAA,+DACCC;AAAA;AAAA;AAAA;AAAA,OAMtD,EACA,KAAK,EAAE,EAEV7B,EAAU,WAAasB,EACvBnB,EAAS,QAAO,CACjB,CAED,SAASW,EAAYD,EAAO,CAC1Bb,EAAU,UAAY,GACtB8B,EAAS,KAAK,CACZ,QAAS,MAAMjB,EAAM,8BACrB,MAAO,MACP,SAAU,WACV,SAAU,OAClB,CAAO,CACF,CAED,SAASL,GAAa,CACpBP,EAAW,MAAM,QAAU,OAC5B,CAED,SAASc,GAAa,CACpBd,EAAW,MAAM,QAAU,MAC5B,CACL,CAAG,CACH,CAAC"}