{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderContainer = document.getElementById('loader');\nconst searchForm = document.getElementById('search-form');\nconst loadMoreBtn = document.getElementById('load-more');\nconst loadingIndicator = document.getElementById('loading-indicator');\n\nconst apiKey = '42175181-9f2e4ea0c75ffabf50c3ef9f9';\nlet currentPage = 1;\nlet currentQuery = '';\nlet currentImagesCount = 0;\n\nif (!apiKey) {\n  console.error(\n    'API key is missing. Please provide the API key in the .env file.'\n  );\n}\n\nfunction toastSuccess(message) {\n  iziToast.success({\n    title: 'Success',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction toastError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction toggleLoadMoreBtn(show) {\n  loadMoreBtn.style.display = show ? 'inline-block' : 'none';\n  loadMoreBtn.style.margin = show ? '0 auto' : '';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nasync function searchImages(query, page = 1) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n  const response = await fetch(url);\n  const data = await response.json();\n\n  return data.hits;\n}\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  toggleLoadMoreBtn(false);\n\n  const query = document.getElementById('query').value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Search images...',\n    });\n    return;\n  }\n\n  try {\n    loaderContainer.style.display = 'block';\n    currentQuery = query;\n    currentPage = 1;\n    const images = await searchImages(query, currentPage);\n    if (images.length > 0) {\n      displayImages(images);\n      toastSuccess(`Was found: ${images.length} images`);\n      initializeLightbox();\n      showLoadMoreBtn();\n    } else {\n      galleryContainer.innerHTML = '';\n      toastError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    toastError('Failed to fetch images.');\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  try {\n    loaderContainer.style.display = 'block';\n    loadingIndicator.style.display = 'block';\n    currentPage++;\n    const images = await searchImages(currentQuery, currentPage);\n    if (images.length > 0) {\n      appendImages(images);\n      toastSuccess(`Loaded additional ${images.length} images`);\n      initializeLightbox();\n      if (images.length < 15) {\n        toastError('No more images to load');\n        hideLoadMoreBtn();\n      }\n      smoothScrollToNextImages();\n    } else {\n      toastError('No more images to load');\n      hideLoadMoreBtn();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    toastError('Failed to fetch additional images.');\n  } finally {\n    loaderContainer.style.display = 'none';\n    loadingIndicator.style.display = 'none';\n  }\n});\n\nfunction smoothScrollToNextImages() {\n  const imageCardHeight = galleryContainer\n    .querySelector('.image-card')\n    .getBoundingClientRect().height;\n  const scrollDistance = imageCardHeight * 2;\n  window.scrollBy({\n    top: scrollDistance,\n    behavior: 'smooth',\n  });\n}\n\nfunction displayImages(images) {\n  galleryContainer.innerHTML = '';\n  appendImages(images);\n}\n\nfunction appendImages(images) {\n  const imageCards = images.map(image => {\n    return `\n            <div class=\"image-card\">\n                <a href=\"${image.largeImageURL}\" data-lightbox=\"image-set\" data-title=\"${image.tags}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                    <div class=\"info\">Likes: ${image.likes}, Views: ${image.views}, Comments: ${image.comments}, Downloads: ${image.downloads}</div>\n                </a>\n            </div>\n        `;\n  });\n\n  galleryContainer.innerHTML += imageCards.join('');\n  currentImagesCount += images.length;\n}\n\nfunction initializeLightbox() {\n  new SimpleLightbox('.gallery a').refresh();\n}\n"],"names":["galleryContainer","loaderContainer","searchForm","loadMoreBtn","loadingIndicator","apiKey","currentPage","currentQuery","currentImagesCount","toastSuccess","message","iziToast","toastError","toggleLoadMoreBtn","show","showLoadMoreBtn","hideLoadMoreBtn","searchImages","query","page","url","event","images","displayImages","initializeLightbox","error","appendImages","smoothScrollToNextImages","scrollDistance","imageCards","image","SimpleLightbox"],"mappings":"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"}