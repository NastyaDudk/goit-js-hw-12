{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Axios from 'axios';\n\nconst refs = {\n  searchQuery: document.querySelector('#searchQuery'),\n  formElem: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery-el'),\n  loaderElem: document.querySelector('.loader'),\n  btnLoad: document.querySelector('.load-more-btn'),\n};\n\nlet _page = 1;\nconst limit = 15;\nconst totalPages = Math.ceil(500 / limit);\nlet value = '';\nconsole.log(value);\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\nrefs.loaderElem.style.visibility = 'hidden';\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  value = refs.searchQuery.value.trim();\n  if (value !== '') {\n    refs.loaderElem.style.visibility = 'visible';\n    refs.galleryEI.innerHTML = '';\n    getPageData();\n  }\n  _page = 1;\n  const data = await getUrl();\n  if ((data.hits.length > 0) & (value !== '')) {\n    refs.loaderElem.style.visibility = 'hidden';\n    renderImages(data.hits);\n    refs.btnLoad.style.visibility = 'visible';\n  } else {\n    refs.loaderElem.style.visibility = 'hidden';\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  }\n\n  e.target.reset();\n}\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\nasync function getUrl() {\n  const response = await axios.get('', {\n    params: {\n      key: '42132466-2eec74b8e2a534f613ea758a4',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: limit,\n      page: _page,\n    },\n  });\n\n  return response.data;\n}\nfunction imageTemplate(img) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = img;\n\n  return `<li>\n    <div class=\"card\">\n    <div class=\"img-container\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    </div>\n    <div class=\"img-comments\">\n    <p class=\"describe\">Likes ${likes}</p>\n    <p class=\"describe\">Views ${views}</p>\n    <p class=\"describe\">Comments ${comments}</p>\n    <p class=\"describe\">Downloads ${downloads}</p>\n    </div>\n    </div>\n    </li>\n    `;\n}\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\nfunction renderImages(images) {\n  const markup = imagesTemplate(images);\n  refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n  let simpleLightBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n\nasync function getPageData() {\n  const data = await getUrl();\n  if (data.hits.length > 0) {\n    renderImages(data.hits);\n    if (_page < totalPages) {\n      refs.btnLoad.style.visibility = 'visible';\n    } else {\n      refs.btnLoad.style.visibility = 'hidden';\n    }\n  } else {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  }\n  refs.loaderElem.style.visibility = 'hidden';\n}\n\nrefs.btnLoad.addEventListener('click', onBtnLoadClick);\n\nasync function onBtnLoadClick() {\n  _page += 1;\n\n  const data = await getUrl();\n  renderImages(data.hits);\n  checkTotalHits(data.totalHits);\n}\n\nfunction checkTotalHits(totalPages) {\n  if (_page >= totalPages) {\n    return iziToast.error({\n      position: 'bottomRight',\n      color: 'blue',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n}\n"],"names":["refs","_page","limit","totalPages","value","onFormSubmit","getPageData","data","getUrl","renderImages","iziToast","axios","Axios","imageTemplate","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","markup","SimpleLightbox","onBtnLoadClick","checkTotalHits"],"mappings":"owBAMA,MAAMA,EAAO,CACX,YAAa,SAAS,cAAc,cAAc,EAClD,SAAU,SAAS,cAAc,OAAO,EACxC,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,SAAS,EAC5C,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEA,IAAIC,EAAQ,EACZ,MAAMC,EAAQ,GACRC,EAAa,KAAK,KAAK,IAAMD,CAAK,EACxC,IAAIE,EAAQ,GACZ,QAAQ,IAAIA,CAAK,EAEjBJ,EAAK,SAAS,iBAAiB,SAAUK,CAAY,EACrDL,EAAK,WAAW,MAAM,WAAa,SAEnC,eAAeK,EAAa,EAAG,CAC7B,EAAE,eAAc,EAChBD,EAAQJ,EAAK,YAAY,MAAM,KAAI,EAC/BI,IAAU,KACZJ,EAAK,WAAW,MAAM,WAAa,UACnCA,EAAK,UAAU,UAAY,GAC3BM,KAEFL,EAAQ,EACR,MAAMM,EAAO,MAAMC,IACdD,EAAK,KAAK,OAAS,EAAMH,IAAU,IACtCJ,EAAK,WAAW,MAAM,WAAa,SACnCS,EAAaF,EAAK,IAAI,EACtBP,EAAK,QAAQ,MAAM,WAAa,YAEhCA,EAAK,WAAW,MAAM,WAAa,SACnCU,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,GAGH,EAAE,OAAO,OACX,CAEA,MAAMC,EAAQC,EAAM,OAAO,CACzB,QAAS,0BACX,CAAC,EACD,eAAeJ,GAAS,CAatB,OAZiB,MAAMG,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAK,qCACL,EAAGP,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMD,CACP,CACL,CAAG,GAEe,IAClB,CACA,SAASY,EAAcC,EAAK,CAC1B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA;AAAA;AAAA,eAGME;AAAA,gBACCD,WAAsBE;AAAA;AAAA;AAAA;AAAA,gCAINC;AAAA,gCACAC;AAAA,mCACGC;AAAA,oCACCC;AAAA;AAAA;AAAA;AAAA,KAKpC,CACA,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EAAO,IAAIV,CAAa,EAAE,KAAK,EAAE,CAC1C,CACA,SAASJ,EAAac,EAAQ,CAC5B,MAAMC,EAASF,EAAeC,CAAM,EACpCvB,EAAK,UAAU,mBAAmB,YAAawB,CAAM,EAChC,IAAIC,EAAe,aAAc,CACpD,aAAc,MACd,aAAc,GACf,CAAA,EAAE,QAAU,CACf,CAEA,eAAenB,GAAc,CAC3B,MAAMC,EAAO,MAAMC,IACfD,EAAK,KAAK,OAAS,GACrBE,EAAaF,EAAK,IAAI,EAClBN,EAAQE,EACVH,EAAK,QAAQ,MAAM,WAAa,UAEhCA,EAAK,QAAQ,MAAM,WAAa,UAGlCU,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,EAEHV,EAAK,WAAW,MAAM,WAAa,QACrC,CAEAA,EAAK,QAAQ,iBAAiB,QAAS0B,CAAc,EAErD,eAAeA,GAAiB,CAC9BzB,GAAS,EAET,MAAMM,EAAO,MAAMC,IACnBC,EAAaF,EAAK,IAAI,EACtBoB,EAAepB,EAAK,SAAS,CAC/B,CAEA,SAASoB,EAAexB,EAAY,CAClC,GAAIF,GAASE,EACX,OAAOO,EAAS,MAAM,CACpB,SAAU,cACV,MAAO,OACP,QAAS,8CACf,CAAK,CAEL"}