{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst input = document.querySelector('.searchQuery');\nconst form = document.querySelector('.form');\nconst container = document.querySelector('.gallery-el');\nconst loaderContainer = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\nconst lightbox = new SimpleLightbox('.photo-card-link', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet page = 1;\nconst limit = 15;\nlet query = '';\nloaderContainer.style.display = 'none';\nlet totalPages = 0;\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  query = e.target.elements.searchQuery.value.trim();\n  if (!query) {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n  container.innerHTML = '';\n  loaderContainer.style.display = 'block';\n  searchImages(query)\n    .then(data => renderImages(data))\n    .catch(error =>\n      iziToast.error({\n        position: 'topRight',\n        message: `Error: ${error}`,\n      })\n    )\n    .finally(() => {\n      e.target.reset();\n      loaderContainer.style.display = 'none';\n    });\n}\n\nasync function onLoadMore() {\n  loaderContainer.style.display = 'block';\n  const data = await searchImages(query);\n  renderImages(data);\n  loaderContainer.style.display = 'none';\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nasync function searchImages(q) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '42192602-d8808410d4367b6455b886704',\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: limit,\n    },\n  });\n  page += 1;\n  return response.data;\n}\n\nfunction imageTemplate(images) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = images;\n  return `\n    <div class=\"photo-card\">\n      <a class=\"photo-card-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"photo-card__img\"\n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n        />\n      </a>\n      <div class=\"info\" style = display: flex;\n  gap: 20px;\n  margin-left: 10px;>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Likes:</b>\n          <span class=\"info-item-value\">${likes}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Views:</b>\n          <span class=\"info-item-value\">${views}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Comments:</b>\n          <span class=\"info-item-value\">${comments}</span>\n        </p>\n        <p class=\"info-item\">\n          <b class=\"info-item-title\">Downloads:</b>\n          <span class=\"info-item-value\">${downloads}</span>\n        </p>\n      </div>\n    </div>\n    `;\n}\n\nfunction renderImages({ hits, totalHits }) {\n  totalPages = Math.ceil(totalHits / limit);\n  if (hits.length > 0) {\n    const markup = hits.map(imageTemplate).join('');\n    container.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    showButton();\n    if (page > totalPages) {\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    iziToast.error({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n  hideButton();\n}\n\nfunction hideButton() {\n  if (page >= totalPages) {\n    loadMoreButton.style.display = 'none';\n  }\n}\n\nfunction showButton() {\n  loadMoreButton.style.display = 'block';\n  loadMoreButton.style.textAlign = 'center';\n}\n"],"names":["form","container","loaderContainer","loadMoreButton","lightbox","SimpleLightbox","page","limit","query","totalPages","onFormSubmit","onLoadMore","e","iziToast","searchImages","data","renderImages","error","q","response","axios","imageTemplate","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","totalHits","markup","showButton","hideButton"],"mappings":"owBAMc,SAAS,cAAc,cAAc,EACnD,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAkB,SAAS,cAAc,SAAS,EAClDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAW,IAAIC,EAAe,mBAAoB,CACtD,aAAc,IACd,aAAc,KAChB,CAAC,EAED,IAAIC,EAAO,EACX,MAAMC,EAAQ,GACd,IAAIC,EAAQ,GACZN,EAAgB,MAAM,QAAU,OAChC,IAAIO,EAAa,EACjBT,EAAK,iBAAiB,SAAUU,CAAY,EAC5CP,EAAe,iBAAiB,QAASQ,CAAU,EAEnD,SAASD,EAAaE,EAAG,CAIvB,GAHAA,EAAE,eAAc,EAChBN,EAAO,EACPE,EAAQI,EAAE,OAAO,SAAS,YAAY,MAAM,OACxC,CAACJ,EAAO,CACVK,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,8BACf,CAAK,EACD,MACD,CACDZ,EAAU,UAAY,GACtBC,EAAgB,MAAM,QAAU,QAChCY,EAAaN,CAAK,EACf,KAAKO,GAAQC,EAAaD,CAAI,CAAC,EAC/B,MAAME,GACLJ,EAAS,MAAM,CACb,SAAU,WACV,QAAS,UAAUI,GAC3B,CAAO,CACF,EACA,QAAQ,IAAM,CACbL,EAAE,OAAO,QACTV,EAAgB,MAAM,QAAU,MACtC,CAAK,CACL,CAEA,eAAeS,GAAa,CAC1BT,EAAgB,MAAM,QAAU,QAChC,MAAMa,EAAO,MAAMD,EAAaN,CAAK,EACrCQ,EAAaD,CAAI,EACjBb,EAAgB,MAAM,QAAU,OAEhC,OAAO,SAAS,CACd,IAAK,WAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEA,eAAeY,EAAaI,EAAG,CAC7B,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAAF,EACA,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAZ,EACA,SAAUC,CACX,CACL,CAAG,EACD,OAAAD,GAAQ,EACDa,EAAS,IAClB,CAEA,SAASE,EAAcC,EAAQ,CAC7B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,yCAEgCE;AAAA;AAAA;AAAA,iBAGxBD;AAAA,iBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAQyBC;AAAA;AAAA;AAAA;AAAA,0CAIAC;AAAA;AAAA;AAAA;AAAA,0CAIAC;AAAA;AAAA;AAAA;AAAA,0CAIAC;AAAA;AAAA;AAAA;AAAA,KAK1C,CAEA,SAASb,EAAa,CAAE,KAAAc,EAAM,UAAAC,GAAa,CAEzC,GADAtB,EAAa,KAAK,KAAKsB,EAAYxB,CAAK,EACpCuB,EAAK,OAAS,EAAG,CACnB,MAAME,EAASF,EAAK,IAAIT,CAAa,EAAE,KAAK,EAAE,EAC9CpB,EAAU,mBAAmB,YAAa+B,CAAM,EAChD5B,EAAS,QAAO,EAChB6B,IACI3B,EAAOG,GACTI,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,CAEP,MACIA,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACR,CAAK,EAEHqB,GACF,CAEA,SAASA,GAAa,CAChB5B,GAAQG,IACVN,EAAe,MAAM,QAAU,OAEnC,CAEA,SAAS8B,GAAa,CACpB9B,EAAe,MAAM,QAAU,QAC/BA,EAAe,MAAM,UAAY,QACnC"}