{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const formElem = document.querySelector('.form');\n  const galleryEl = document.querySelector('.gallery-el');\n  const loaderElem = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n  let page = 1;\n  let query = '';\n\n  hideLoader();\n  loadMoreBtn.style.display = 'none';\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n\n  formElem.addEventListener('submit', onSubmit);\n  loadMoreBtn.addEventListener('click', loadMoreImages);\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    const value = formElem.querySelector('.input').value;\n    try {\n      const data = await getPhotoBySearch(value);\n      if (data.hits.length === 0) {\n        throw new Error('No images found');\n      }\n      query = value;\n      page = 1;\n      renderImages(data.hits);\n      loadMoreBtn.style.display = 'block';\n    } catch (error) {\n      renderError(error);\n    } finally {\n      hideLoader();\n    }\n\n    formElem.reset();\n  }\n\n  function getPhotoBySearch(searchValue) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '42153847-0f7baac2d7b2e92d7ce6bbe8e';\n    const Query = `?key=${KEY}&q=${searchValue}`;\n    const params =\n      '&image_type=photo&orientation=horizontal&safesearch=true&per_page=15';\n    const url = BASE_URL + Query + params;\n\n    return axios.get(url).then(res => {\n      return res.data;\n    });\n  }\n\n  function renderImages(array) {\n    const markup = array\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `\n        <div class=\"gallery\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n            <ul class=\"info-cards-container\">\n              <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n              <li class=\"info-cards-elements\">views<span>${views}</span></li>\n              <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n              <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n          </a>\n        </div>\n      `;\n        }\n      )\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n\n  function renderError(error) {\n    galleryEl.innerHTML = '';\n    iziToast.show({\n      message: `‚ùå \"${error.message}\". Please try again!`,\n      color: 'red',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  }\n\n  function showLoader() {\n    loaderElem.style.display = 'block';\n  }\n\n  function hideLoader() {\n    loaderElem.style.display = 'none';\n  }\n});\n"],"names":["formElem","galleryEl","loaderElem","loadMoreBtn","page","query","hideLoader","lightbox","SimpleLightbox","onSubmit","e","showLoader","value","data","getPhotoBySearch","renderImages","error","renderError","searchValue","BASE_URL","Query","params","url","axios","res","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"+vBAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAO,EACPC,EAAQ,GAEZC,IACAH,EAAY,MAAM,QAAU,OAE5B,MAAMI,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAClB,CAAG,EAEDR,EAAS,iBAAiB,SAAUS,CAAQ,EAC5CN,EAAY,iBAAiB,QAAS,cAAc,EAEpD,eAAeM,EAASC,EAAG,CACzBA,EAAE,eAAc,EAChBC,IAEA,MAAMC,EAAQZ,EAAS,cAAc,QAAQ,EAAE,MAC/C,GAAI,CACF,MAAMa,EAAO,MAAMC,EAAiBF,CAAK,EACzC,GAAIC,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,iBAAiB,EAEnCR,EAAQO,EACRR,EAAO,EACPW,EAAaF,EAAK,IAAI,EACtBV,EAAY,MAAM,QAAU,OAC7B,OAAQa,EAAP,CACAC,EAAYD,CAAK,CACvB,QAAc,CACRV,GACD,CAEDN,EAAS,MAAK,CACf,CAED,SAASc,EAAiBI,EAAa,CACrC,MAAMC,EAAW,2BAEXC,EAAQ,6CAAiBF,IACzBG,EACJ,uEACIC,EAAMH,EAAWC,EAAQC,EAE/B,OAAOE,EAAM,IAAID,CAAG,EAAE,KAAKE,GAClBA,EAAI,IACZ,CACF,CAED,SAAST,EAAaU,EAAO,CAC3B,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB;AAAA;AAAA,qBAEIN;AAAA,wBACGC,WAAsBC,aAAgBA;AAAA;AAAA,2DAEHC;AAAA,2DACAC;AAAA,8DACGC;AAAA,+DACCC;AAAA;AAAA;AAAA;AAAA,OAMxD,EACA,KAAK,EAAE,EAEVhC,EAAU,mBAAmB,YAAayB,CAAM,EAChDnB,EAAS,QAAO,CACjB,CAED,SAASU,EAAYD,EAAO,CAC1Bf,EAAU,UAAY,GACtBiC,EAAS,KAAK,CACZ,QAAS,MAAMlB,EAAM,8BACrB,MAAO,MACP,SAAU,WACV,SAAU,OAChB,CAAK,CACF,CAED,SAASL,GAAa,CACpBT,EAAW,MAAM,QAAU,OAC5B,CAED,SAASI,GAAa,CACpBJ,EAAW,MAAM,QAAU,MAC5B,CACH,CAAC"}