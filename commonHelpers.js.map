{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const formElem = document.querySelector('.form');\n  const galleryEl = document.querySelector('.gallery-el');\n  const loaderElem = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more');\n\n  hideLoader();\n  hideLoadMoreButton();\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n\n  formElem.addEventListener('submit', onSubmit);\n  loadMoreBtn.addEventListener('click', onLoadMore);\n\n  let searchValue = '';\n  let currentPage = 1;\n\n  function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    searchValue = formElem.querySelector('.input').value;\n    currentPage = 1;\n    getPhotoBySearch(searchValue, currentPage)\n      .then(data => {\n        renderImages(data.hits);\n        showLoadMoreButton();\n      })\n      .catch(error => {\n        renderError(error);\n        hideLoadMoreButton();\n      })\n      .finally(() => {\n        hideLoader();\n      });\n\n    formElem.reset();\n  }\n\n  function onLoadMore() {\n    showLoader();\n    currentPage++;\n    getPhotoBySearch(searchValue, currentPage)\n      .then(data => {\n        renderImages(data.hits);\n        showLoadMoreButton();\n      })\n      .catch(error => {\n        renderError(error);\n        hideLoadMoreButton();\n      })\n      .finally(() => {\n        hideLoader();\n      });\n  }\n\n  function getPhotoBySearch(searchValue, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '42153847-0f7baac2d7b2e92d7ce6bbe8e';\n    const Query = `?key=${KEY}&q=${searchValue}`;\n    const params =\n      '&image_type=photo&orientation=horizontal&safesearch=true&per_page=20';\n    const url = BASE_URL + Query + params + `&page=${page}`;\n\n    return fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        if (data.total === 0) {\n          throw new Error('No images found');\n        }\n        return data;\n      });\n  }\n\n  function renderImages(array) {\n    let markup = '';\n    array.forEach(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        markup += `\n          <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n              <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n              </ul>\n            </a>\n          </div>\n        `;\n      }\n    );\n\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n\n  function renderError(error) {\n    galleryEl.innerHTML = '';\n    iziToast.show({\n      message: `‚ùå \"${error.message}\". Please try again!`,\n      color: 'red',\n      position: 'topRight',\n      maxWidth: '400px',\n    });\n  }\n\n  function showLoader() {\n    loaderElem.style.display = 'block';\n  }\n\n  function hideLoader() {\n    loaderElem.style.display = 'none';\n  }\n});\n"],"names":["formElem","galleryEl","loaderElem","loadMoreBtn","hideLoader","lightbox","SimpleLightbox","onSubmit","onLoadMore","searchValue","currentPage","e","showLoader","getPhotoBySearch","data","renderImages","error","renderError","page","BASE_URL","Query","params","url","res","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"6vBAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,YAAY,EAEvDC,IACA,qBAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAClB,CAAG,EAEDN,EAAS,iBAAiB,SAAUO,CAAQ,EAC5CJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,IAAIC,EAAc,GACdC,EAAc,EAElB,SAASH,EAASI,EAAG,CACnBA,EAAE,eAAc,EAChBC,IAEAH,EAAcT,EAAS,cAAc,QAAQ,EAAE,MAC/CU,EAAc,EACdG,EAAiBJ,EAAaC,CAAW,EACtC,KAAKI,GAAQ,CACZC,EAAaD,EAAK,IAAI,EACtB,oBACR,CAAO,EACA,MAAME,GAAS,CACdC,EAAYD,CAAK,EACjB,oBACR,CAAO,EACA,QAAQ,IAAM,CACbZ,GACR,CAAO,EAEHJ,EAAS,MAAK,CACf,CAED,SAASQ,GAAa,CACpBI,IACAF,IACAG,EAAiBJ,EAAaC,CAAW,EACtC,KAAKI,GAAQ,CACZC,EAAaD,EAAK,IAAI,EACtB,oBACR,CAAO,EACA,MAAME,GAAS,CACdC,EAAYD,CAAK,EACjB,oBACR,CAAO,EACA,QAAQ,IAAM,CACbZ,GACR,CAAO,CACJ,CAED,SAASS,EAAiBJ,EAAaS,EAAM,CAC3C,MAAMC,EAAW,2BAEXC,EAAQ,6CAAiBX,IACzBY,EACJ,uEACIC,EAAMH,EAAWC,EAAQC,EAAS,SAASH,IAEjD,OAAO,MAAMI,CAAG,EACb,KAAKC,GAAOA,EAAI,MAAM,EACtB,KAAKT,GAAQ,CACZ,GAAIA,EAAK,QAAU,EACjB,MAAM,IAAI,MAAM,iBAAiB,EAEnC,OAAOA,CACf,CAAO,CACJ,CAED,SAASC,EAAaS,EAAO,CAC3B,IAAIC,EAAS,GACbD,EAAM,QACJ,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY,CACJP,GAAU;AAAA;AAAA,uBAEKC;AAAA,0BACGC,WAAsBC,aAAgBA;AAAA;AAAA,6DAEHC;AAAA,6DACAC;AAAA,gEACGC;AAAA,iEACCC;AAAA;AAAA;AAAA;AAAA,SAK1D,CACP,EAEI/B,EAAU,mBAAmB,YAAawB,CAAM,EAChDpB,EAAS,QAAO,CACjB,CAED,SAASY,EAAYD,EAAO,CAC1Bf,EAAU,UAAY,GACtBgC,EAAS,KAAK,CACZ,QAAS,MAAMjB,EAAM,8BACrB,MAAO,MACP,SAAU,WACV,SAAU,OAChB,CAAK,CACF,CAED,SAASJ,GAAa,CACpBV,EAAW,MAAM,QAAU,OAC5B,CAED,SAASE,GAAa,CACpBF,EAAW,MAAM,QAAU,MAC5B,CACH,CAAC"}