{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const formElem = document.querySelector('.form');\n  const galleryEl = document.querySelector('.gallery-el');\n  const loaderElem = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n  let page = 1;\n  let searchQuery = '';\n\n  hideLoader();\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n  });\n\n  formElem.addEventListener('submit', onSubmit);\n  loadMoreBtn.addEventListener('click', onLoadMore);\n\n  function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n\n    searchQuery = formElem.querySelector('.input').value;\n    page = 1;\n    getPhotos()\n      .then(data => {\n        renderImages(data.hits);\n        toggleLoadMoreBtn(data.totalHits);\n      })\n      .catch(error => {\n        renderError(error);\n      })\n      .finally(() => {\n        hideLoader();\n      });\n  }\n\n  async function onLoadMore() {\n    showLoader();\n\n    page++;\n    getPhotos()\n      .then(data => {\n        const newImages = data.hits;\n        renderImages(newImages, true);\n        toggleLoadMoreBtn(data.totalHits);\n      })\n      .catch(error => {\n        renderError(error);\n      })\n      .finally(() => {\n        hideLoader();\n      });\n  }\n\n  async function getPhotos() {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const KEY = '42153847-0f7baac2d7b2e92d7ce6bbe8e';\n    const params = `?key=${KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n    const url = BASE_URL + params;\n\n    try {\n      const response = await Axios.get(url);\n      const data = response.data;\n\n      if (data.total === 0) {\n        throw new Error('No images found');\n      }\n\n      return data;\n    } catch (error) {\n      throw new Error('Failed to fetch images');\n    }\n  }\n\n  function renderImages(array, append = false) {\n    const markup = array\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `\n            <div class=\"gallery\">\n              <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"360\" height=\"300\" />\n                <ul class=\"info-cards-container\">\n                  <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                  <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                  <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                  <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n                </ul>\n              </a>\n            </div>\n          `;\n        }\n      )\n      .join('');\n\n    if (append) {\n      galleryEl.insertAdjacentHTML('beforeend', markup);\n    } else {\n      galleryEl.innerHTML = markup;\n    }\n\n    lightbox.refresh();\n  }\n\n  function renderError(error) {\n    const errorContainer = document.getElementById('error-container');\n    const errorElement = document.createElement('p');\n    errorElement.classList.add('error-message');\n    errorElement.textContent = error;\n    errorContainer.innerHTML = '';\n    errorContainer.appendChild(errorElement);\n    errorContainer.style.display = 'block';\n  }\n});\n"],"names":["formElem","galleryEl","loadMoreBtn","page","searchQuery","lightbox","SimpleLightbox","onSubmit","onLoadMore","e","getPhotos","data","renderImages","error","renderError","newImages","BASE_URL","params","url","Axios","array","append","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","errorContainer","errorElement"],"mappings":"6vBAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAY,SAAS,cAAc,aAAa,EACnC,SAAS,cAAc,SAAS,EACnD,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAO,EACPC,EAAc,GAElB,aAEA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAClB,CAAG,EAEDN,EAAS,iBAAiB,SAAUO,CAAQ,EAC5CL,EAAY,iBAAiB,QAASM,CAAU,EAEhD,SAASD,EAASE,EAAG,CACnBA,EAAE,eAAc,EAChB,aAEAL,EAAcJ,EAAS,cAAc,QAAQ,EAAE,MAC/CG,EAAO,EACPO,EAAW,EACR,KAAKC,GAAQ,CACZC,EAAaD,EAAK,IAAI,EACtB,kBAAkBA,EAAK,SAAS,CACxC,CAAO,EACA,MAAME,GAAS,CACdC,EAAYD,CAAK,CACzB,CAAO,EACA,QAAQ,IAAM,CACb,YACR,CAAO,CACJ,CAED,eAAeL,GAAa,CAC1B,aAEAL,IACAO,EAAW,EACR,KAAKC,GAAQ,CACZ,MAAMI,EAAYJ,EAAK,KACvBC,EAAaG,EAAW,EAAI,EAC5B,kBAAkBJ,EAAK,SAAS,CACxC,CAAO,EACA,MAAME,GAAS,CACdC,EAAYD,CAAK,CACzB,CAAO,EACA,QAAQ,IAAM,CACb,YACR,CAAO,CACJ,CAED,eAAeH,GAAY,CACzB,MAAMM,EAAW,2BAEXC,EAAS,6CAAiBb,8EAAwFD,IAClHe,EAAMF,EAAWC,EAEvB,GAAI,CAEF,MAAMN,GADW,MAAMQ,EAAM,IAAID,CAAG,GACd,KAEtB,GAAIP,EAAK,QAAU,EACjB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,CACR,MAAC,CACA,MAAM,IAAI,MAAM,wBAAwB,CACzC,CACF,CAED,SAASC,EAAaQ,EAAOC,EAAS,GAAO,CAC3C,MAAMC,EAASF,EACZ,IACC,CAAC,CACC,cAAAG,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB;AAAA;AAAA,yBAEQN;AAAA,4BACGC,WAAsBC,aAAgBA;AAAA;AAAA,+DAEHC;AAAA,+DACAC;AAAA,kEACGC;AAAA,mEACCC;AAAA;AAAA;AAAA;AAAA,WAM5D,EACA,KAAK,EAAE,EAENR,EACFpB,EAAU,mBAAmB,YAAaqB,CAAM,EAEhDrB,EAAU,UAAYqB,EAGxBjB,EAAS,QAAO,CACjB,CAED,SAASS,EAAYD,EAAO,CAC1B,MAAMiB,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAe,SAAS,cAAc,GAAG,EAC/CA,EAAa,UAAU,IAAI,eAAe,EAC1CA,EAAa,YAAclB,EAC3BiB,EAAe,UAAY,GAC3BA,EAAe,YAAYC,CAAY,EACvCD,EAAe,MAAM,QAAU,OAChC,CACH,CAAC"}